<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è­·ç†å€«ç†å››å¤§åŸå‰‡äº’å‹•å­¸ç¿’æ¨‚åœ’</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            text-align: center;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .principles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .principle-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .principle-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }

        .principle-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--accent-color);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .principle-card:hover::before {
            opacity: 1;
        }

        .principle-card.autonomy { --accent-color: #ff6b6b; }
        .principle-card.justice { --accent-color: #4ecdc4; }
        .principle-card.beneficence { --accent-color: #45b7d1; }
        .principle-card.non-maleficence { --accent-color: #f9ca24; }

        .principle-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            background: var(--accent-color);
        }

        .principle-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1rem;
            color: #333;
        }

        .principle-description {
            text-align: center;
            line-height: 1.6;
            color: #666;
        }

        .game-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .game-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .game-tab {
            background: #f8f9fa;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #666;
        }

        .game-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .game-content {
            display: none;
        }

        .game-content.active {
            display: block;
        }

        .scenario-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 5px solid #667eea;
        }

        .scenario-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #333;
        }

        .scenario-text {
            line-height: 1.6;
            margin-bottom: 1.5rem;
            color: #555;
        }

        .options {
            display: grid;
            gap: 1rem;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            border: 1px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 1px solid #dc3545;
            color: #721c24;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin: 2rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        .score-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 1rem 0;
            color: #667eea;
        }

        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .next-btn.show {
            display: inline-block;
        }

        .principle-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .principle-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
            color: var(--accent-color);
        }

        .quiz-container {
            text-align: center;
        }

        .question-counter {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 1rem;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .bounce-animation {
            animation: bounce 1s ease-in-out;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 1rem;
            }
            
            .principles-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .game-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¥ è­·ç†å€«ç†å››å¤§åŸå‰‡äº’å‹•å­¸ç¿’æ¨‚åœ’ ğŸ®</h1>
        <p>é€šéäº’å‹•éŠæˆ²æ·±å…¥ç†è§£è­·ç†å€«ç†æ ¸å¿ƒåŸå‰‡</p>
    </div>

    <div class="container">
        <!-- å››å¤§åŸå‰‡å¡ç‰‡ -->
        <div class="principles-grid">
            <div class="principle-card autonomy" onclick="openPrincipleModal('autonomy')">
                <div class="principle-icon">ğŸ™‹â€â™‚ï¸</div>
                <h3 class="principle-title">è‡ªä¸»åŸå‰‡ Autonomy</h3>
                <p class="principle-description">å°Šé‡ç—…äººçš„è‡ªä¸»æ±ºå®šæ¬Šï¼Œç¢ºä¿çŸ¥æƒ…åŒæ„</p>
            </div>
            
            <div class="principle-card justice" onclick="openPrincipleModal('justice')">
                <div class="principle-icon">âš–ï¸</div>
                <h3 class="principle-title">å…¬å¹³åŸå‰‡ Justice</h3>
                <p class="principle-description">å…¬å¹³åˆ†é…é†«ç™‚è³‡æºï¼Œç¢ºä¿å¹³ç­‰å°å¾…</p>
            </div>
            
            <div class="principle-card beneficence" onclick="openPrincipleModal('beneficence')">
                <div class="principle-icon">ğŸ’š</div>
                <h3 class="principle-title">è¡Œå–„åŸå‰‡ Beneficence</h3>
                <p class="principle-description">ç©æ¥µç‚ºç—…äººè¬€æ±‚æœ€å¤§å¥åº·ç¦ç¥‰</p>
            </div>
            
            <div class="principle-card non-maleficence" onclick="openPrincipleModal('non-maleficence')">
                <div class="principle-icon">ğŸ›¡ï¸</div>
                <h3 class="principle-title">ä¸å‚·å®³åŸå‰‡ Non-maleficence</h3>
                <p class="principle-description">é¿å…å°ç—…äººé€ æˆä¸å¿…è¦çš„å‚·å®³</p>
            </div>
        </div>

        <!-- éŠæˆ²å€åŸŸ -->
        <div class="game-section">
            <div class="game-tabs">
                <button class="game-tab active" onclick="switchGame('scenario')">æƒ…å¢ƒæŒ‘æˆ°</button>
                <button class="game-tab" onclick="switchGame('quiz')">å¿«å•å¿«ç­”</button>
                <button class="game-tab" onclick="switchGame('case')">æ¡ˆä¾‹åˆ†æ</button>
            </div>

            <div class="score-display">å¾—åˆ†: <span id="score">0</span> / <span id="total">0</span></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>

            <!-- æƒ…å¢ƒæŒ‘æˆ°éŠæˆ² -->
            <div id="scenario-game" class="game-content active">
                <div class="quiz-container">
                    <div class="question-counter">
                        é¡Œç›® <span id="scenario-current">1</span> / <span id="scenario-total">5</span>
                    </div>
                    <div id="scenario-question"></div>
                    <button class="next-btn" id="scenario-next" onclick="nextScenario()">ä¸‹ä¸€é¡Œ</button>
                </div>
            </div>

            <!-- å¿«å•å¿«ç­”éŠæˆ² -->
            <div id="quiz-game" class="game-content">
                <div class="quiz-container">
                    <div class="question-counter">
                        é¡Œç›® <span id="quiz-current">1</span> / <span id="quiz-total">10</span>
                    </div>
                    <div id="quiz-question"></div>
                    <button class="next-btn" id="quiz-next" onclick="nextQuiz()">ä¸‹ä¸€é¡Œ</button>
                </div>
            </div>

            <!-- æ¡ˆä¾‹åˆ†æéŠæˆ² -->
            <div id="case-game" class="game-content">
                <div class="quiz-container">
                    <div class="question-counter">
                        æ¡ˆä¾‹ <span id="case-current">1</span> / <span id="case-total">3</span>
                    </div>
                    <div id="case-question"></div>
                    <button class="next-btn" id="case-next" onclick="nextCase()">ä¸‹ä¸€å€‹æ¡ˆä¾‹</button>
                </div>
            </div>
        </div>
    </div>

    <!-- åŸå‰‡è©³æƒ…æ¨¡æ…‹æ¡† -->
    <div id="principle-modal" class="principle-modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closePrincipleModal()">Ã—</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let currentGame = 'scenario';
        let gameStates = {
            scenario: { current: 0, score: 0, answered: false },
            quiz: { current: 0, score: 0, answered: false },
            case: { current: 0, score: 0, answered: false }
        };

        // æƒ…å¢ƒæŒ‘æˆ°é¡Œç›®
        const scenarioQuestions = [
            {
                title: "çŸ¥æƒ…åŒæ„çš„å›°å¢ƒ",
                text: "82æ­²çš„æçˆºçˆºæ‚£æœ‰è¼•åº¦å¤±æ™ºï¼Œéœ€è¦é€²è¡Œé«–é—œç¯€æ‰‹è¡“ã€‚ä»–çš„å¥³å…’å …æŒè¦ä»£æ›¿çˆ¶è¦ªæ±ºå®šï¼Œä½†æçˆºçˆºè¡¨ç¤ºè‡ªå·±å¯ä»¥ç†è§£æ‰‹è¡“å…§å®¹ã€‚ä½œç‚ºè­·ç†å¸«ï¼Œä½ æ‡‰è©²ï¼š",
                options: [
                    { text: "ç›´æ¥è®“å¥³å…’ç°½ç½²åŒæ„æ›¸ï¼Œå› ç‚ºç—…äººæœ‰å¤±æ™ºç—‡", correct: false },
                    { text: "è©•ä¼°æçˆºçˆºçš„æ„æ€èƒ½åŠ›ï¼Œè‹¥å…·å‚™å‰‡å°Šé‡ä»–çš„è‡ªä¸»æ±ºå®š", correct: true },
                    { text: "æ‹’çµ•é€²è¡Œæ‰‹è¡“ï¼Œé¿å…æ³•å¾‹ç³¾ç´›", correct: false },
                    { text: "è®“é†«å¸«æ±ºå®šå°±å¥½ï¼Œé€™ä¸æ˜¯è­·ç†å¸«çš„è²¬ä»»", correct: false }
                ],
                feedback: "æ­£ç¢ºï¼æ ¹æ“šè‡ªä¸»åŸå‰‡ï¼Œæ‡‰è©•ä¼°ç—…äººçš„æ„æ€èƒ½åŠ›ã€‚å³ä½¿æœ‰è¼•åº¦å¤±æ™ºï¼Œè‹¥ç—…äººä»å…·å‚™ç†è§£ã€è©•ä¼°å’Œè¡¨é”æ±ºå®šçš„èƒ½åŠ›ï¼Œå°±æ‡‰å°Šé‡å…¶è‡ªä¸»æ¬Šã€‚"
            },
            {
                title: "é†«ç™‚è³‡æºåˆ†é…",
                text: "åŠ è­·ç—…æˆ¿åªå‰©ä¸€å¼µç—…åºŠï¼ŒåŒæ™‚æœ‰å…©ä½ç—…äººéœ€è¦ï¼š75æ­²å¿ƒè‚Œæ¢—å¡ç—…äººï¼ˆé å¾Œè‰¯å¥½ï¼‰å’Œ35æ­²è»Šç¦å¤–å‚·ç—…äººï¼ˆé å¾Œè¼ƒå·®ä½†å¹´è¼•ï¼‰ã€‚æ ¹æ“šå…¬å¹³åŸå‰‡ï¼Œæ‡‰è©²ï¼š",
                options: [
                    { text: "çµ¦å¹´è¼•çš„ç—…äººï¼Œå› ç‚ºä»–é‚„æœ‰å¾ˆé•·çš„äººç”Ÿ", correct: false },
                    { text: "çµ¦å¹´é•·çš„ç—…äººï¼Œå› ç‚ºé å¾Œè¼ƒå¥½ï¼Œè³‡æºåˆ©ç”¨æ•ˆç›Šé«˜", correct: true },
                    { text: "æŠ½ç±¤æ±ºå®šï¼Œå®Œå…¨å…¬å¹³", correct: false },
                    { text: "çµ¦å…ˆåˆ°çš„ç—…äºº", correct: false }
                ],
                feedback: "æ­£ç¢ºï¼åœ¨ç¨€æœ‰è³‡æºåˆ†é…ä¸­ï¼Œä¾æ“šé å¾Œåˆ†é…æ˜¯é‡è¦çš„å…¬å¹³åŸå‰‡ä¹‹ä¸€ã€‚å°‡è³‡æºåˆ†é…çµ¦æ²»ç™’æˆåŠŸç‡è¼ƒé«˜çš„ç—…äººï¼Œå¯æœ€å¤§åŒ–é†«ç™‚è³‡æºæ•ˆç›Šã€‚"
            },
            {
                title: "è¡Œå–„èˆ‡è‡ªä¸»çš„è¡çª",
                text: "65æ­²ç³–å°¿ç—…æ‚£è€…ç‹é˜¿å§¨æ‹’çµ•æˆªè‚¢æ‰‹è¡“ï¼Œé›–ç„¶ä¸æˆªè‚¢å¯èƒ½å°è‡´æ•—è¡€ç—‡æ­»äº¡ã€‚å¥¹èªªï¼šã€Œæˆ‘å¯§é¡˜æ­»ä¹Ÿä¸è¦æ®˜å»¢ã€‚ã€ä½ æ‡‰è©²ï¼š",
                options: [
                    { text: "å°Šé‡ç—…äººæ±ºå®šï¼Œæä¾›å®‰å¯§ç…§è­·", correct: true },
                    { text: "èªªæœå®¶å±¬åŒæ„æ‰‹è¡“ï¼ŒæŒ½æ•‘ç”Ÿå‘½", correct: false },
                    { text: "å¼·åˆ¶åŸ·è¡Œæ‰‹è¡“ï¼Œå› ç‚ºæ•‘å‘½æœ€é‡è¦", correct: false },
                    { text: "ä¸ç†æœƒç—…äººçš„æ„è¦‹ï¼Œé†«å¸«èªªäº†ç®—", correct: false }
                ],
                feedback: "æ­£ç¢ºï¼é›–ç„¶æˆªè‚¢å¯èƒ½æ•‘å‘½ï¼ˆè¡Œå–„åŸå‰‡ï¼‰ï¼Œä½†ç—…äººæœ‰æ˜ç¢ºè¡¨é”æ‹’çµ•æ„é¡˜ï¼Œä¸”å…·å‚™æ±ºå®šèƒ½åŠ›ã€‚è‡ªä¸»åŸå‰‡è¦æ±‚æˆ‘å€‘å°Šé‡ç—…äººçš„é¸æ“‡ï¼Œå³ä½¿æˆ‘å€‘ä¸åŒæ„ã€‚"
            },
            {
                title: "ç–¼ç—›ç®¡ç†çš„å…©é›£",
                text: "æœ«æœŸç™Œç—‡ç—…äººéœ€è¦å¤§åŠ‘é‡å—å•¡æ­¢ç—›ï¼Œä½†å¯èƒ½åŠ é€Ÿæ­»äº¡ã€‚æ ¹æ“šä¸å‚·å®³åŸå‰‡ï¼Œä½ æ‡‰è©²ï¼š",
                options: [
                    { text: "æ‹’çµ•çµ¦äºˆå—å•¡ï¼Œé¿å…åŠ é€Ÿæ­»äº¡", correct: false },
                    { text: "çµ¦äºˆé©ç•¶åŠ‘é‡å—å•¡æ­¢ç—›ï¼Œæ¥å—å¯èƒ½çš„å‰¯ä½œç”¨", correct: true },
                    { text: "åªçµ¦ä¸€èˆ¬åŠ‘é‡ï¼Œå®‰å…¨ç¬¬ä¸€", correct: false },
                    { text: "è®“é†«å¸«è‡ªå·±æ±ºå®šï¼Œè­·ç†å¸«ä¸åƒèˆ‡", correct: false }
                ],
                feedback: "æ­£ç¢ºï¼é€™ç¬¦åˆè¤‡å¼å½±éŸ¿åŸå‰‡ã€‚çµ¦äºˆå—å•¡çš„ä¸»è¦ç›®çš„æ˜¯æ­¢ç—›ï¼ˆå–„æ„ï¼‰ï¼ŒåŠ é€Ÿæ­»äº¡æ˜¯å¯é çŸ¥ä½†éæ•…æ„çš„å‰¯ä½œç”¨ã€‚é€™æ˜¯å€«ç†å¯æ¥å—çš„è¡Œç‚ºã€‚"
            },
            {
                title: "æ–‡åŒ–å·®ç•°èˆ‡è­·ç†å€«ç†",
                text: "å°å°¼ç±ç§»å·¥æ‚£è€…å®¶å±¬è¦æ±‚éš±çç™Œç—‡è¨ºæ–·ï¼Œèªç‚ºå‘ŠçŸ¥æœƒè®“ç—…äººå¤±å»æ±‚ç”Ÿæ„å¿—ã€‚ä½†ç—…äººè©¢å•è‡ªå·±çš„ç—…æƒ…ï¼Œä½ æ‡‰è©²ï¼š",
                options: [
                    { text: "å°Šé‡æ–‡åŒ–å·®ç•°ï¼Œé…åˆå®¶å±¬éš±ç", correct: false },
                    { text: "ç›´æ¥å‘ŠçŸ¥ç—…äººçœŸç›¸ï¼Œä¸ç®¡æ–‡åŒ–èƒŒæ™¯", correct: false },
                    { text: "è©•ä¼°ç—…äººçš„æ„é¡˜ï¼Œäº†è§£ä»–æ˜¯å¦æƒ³çŸ¥é“ç—…æƒ…", correct: true },
                    { text: "è«‹ç¤¾å·¥è™•ç†é€™å€‹æ–‡åŒ–è¡çª", correct: false }
                ],
                feedback: "æ­£ç¢ºï¼æ‡‰è©²å…ˆè©•ä¼°ç—…äººæœ¬äººçš„æ„é¡˜ã€‚å¦‚æœç—…äººæ˜ç¢ºè¡¨ç¤ºæƒ³çŸ¥é“ç—…æƒ…ï¼Œå°±æ‡‰è©²å°Šé‡å…¶çŸ¥æƒ…æ¬Šã€‚æ–‡åŒ–æ•æ„Ÿæ€§é‡è¦ï¼Œä½†ä¸èƒ½é•èƒŒç—…äººçš„è‡ªä¸»æ¬Šã€‚"
            }
        ];

        // å¿«å•å¿«ç­”é¡Œç›®
        const quizQuestions = [
            {
                question: "çŸ¥æƒ…åŒæ„çš„å››å¤§è¦ç´ ä¸åŒ…æ‹¬ä¸‹åˆ—ä½•è€…ï¼Ÿ",
                options: ["ç—…äººèƒ½åŠ›", "ç—…æƒ…èªªæ˜", "ç—…äººç†è§£", "å®¶å±¬åŒæ„"],
                correct: 3,
                explanation: "çŸ¥æƒ…åŒæ„å››å¤§è¦ç´ ï¼šç—…äººèƒ½åŠ›ã€ç—…æƒ…èªªæ˜ã€ç—…äººç†è§£ã€è‡ªé¡˜æ€§ã€‚å®¶å±¬åŒæ„ä¸æ˜¯å¿…è¦è¦ç´ ã€‚"
            },
            {
                question: "ä¸‹åˆ—ä½•è€…å±¬æ–¼ã€Œç¨‹åºæ€§å…¬å¹³ã€ï¼Ÿ",
                options: ["é–€è¨ºå…ˆä¾†å…ˆæœå‹™", "ä¾é†«ç™‚éœ€æ±‚åˆ†é…", "å¹³ç­‰åˆ†é…è³‡æº", "ä¾é å¾Œåˆ†é…"],
                correct: 0,
                explanation: "ç¨‹åºæ€§å…¬å¹³å¼·èª¿éç¨‹çš„å…¬å¹³æ€§ï¼Œå¦‚é–€è¨ºæ¡å…ˆä¾†å…ˆæœå‹™çš„é †åºã€‚"
            },
            {
                question: "è¡Œå–„åŸå‰‡çš„æ ¸å¿ƒæ˜¯ï¼š",
                options: ["é¿å…å‚·å®³", "å°Šé‡è‡ªä¸»", "ç‚ºç—…äººè¬€ç¦ç¥‰", "å…¬å¹³åˆ†é…"],
                correct: 2,
                explanation: "è¡Œå–„åŸå‰‡è¦æ±‚é†«è­·äººå“¡ç©æ¥µç‚ºç—…äººè¬€æ±‚æœ€å¤§çš„å¥åº·ç¦ç¥‰ã€‚"
            },
            {
                question: "ä¸å‚·å®³åŸå‰‡æºè‡ªæ–¼ï¼š",
                options: ["å—ä¸æ ¼çˆ¾èª“è©", "å¸Œæ³¢å…‹æ‹‰åº•èª“è¨€", "è­·ç†å¸«æ³•", "é†«å¸«æ³•"],
                correct: 1,
                explanation: "ä¸å‚·å®³åŸå‰‡æºæ–¼å¸Œæ³¢å…‹æ‹‰åº•èª“è¨€ä¸­çš„'never do harm to anyone'ã€‚"
            },
            {
                question: "å®Œå…¨è¡Œç‚ºèƒ½åŠ›çš„æ¢ä»¶æ˜¯ï¼š",
                options: ["å¹´æ»¿16æ­²", "å¹´æ»¿18æ­²ä¸”æœªå—ç¦æ²»ç”¢å®£å‘Š", "å¹´æ»¿20æ­²", "å·²å©šè€…"],
                correct: 1,
                explanation: "å®Œå…¨è¡Œç‚ºèƒ½åŠ›ï¼šå¹´æ»¿18æ­²ä¸”æœªå—ç¦æ²»ç”¢å®£å‘Šè€…ã€‚"
            },
            {
                question: "åˆ†é…æ€§å…¬å¹³ä¸»è¦é—œæ³¨ï¼š",
                options: ["æ‡²ç½°åˆ¶åº¦", "ç¨‹åºå…¬æ­£", "è³‡æºåˆ†é…", "å¹³ç­‰æ¬Šåˆ©"],
                correct: 2,
                explanation: "åˆ†é…æ€§å…¬å¹³æŒ‡æ‡‰ç”¨åŸå‰‡å’Œè¦å‰‡ä»¥é”æˆå…¬å¹³çš„è³‡æºåˆ†é…ã€‚"
            },
            {
                question: "è¤‡å¼å½±éŸ¿åŸå‰‡é©ç”¨æ–¼ï¼š",
                options: ["æ•…æ„å‚·å®³", "é æœŸçš„é–“æ¥å‚·å®³", "æ„å¤–äº‹æ•…", "é†«ç™‚ç–å¤±"],
                correct: 1,
                explanation: "è¤‡å¼å½±éŸ¿åŸå‰‡é©ç”¨æ–¼æ­£ç•¶è¡Œç‚ºç”¢ç”Ÿçš„é–“æ¥ä¸”å¯é çŸ¥çš„æœ‰å®³å½±éŸ¿ã€‚"
            },
            {
                question: "å‘ŠçŸ¥èªªæ˜ç¾©å‹™å¯å…é™¤çš„æƒ…æ³ä¸åŒ…æ‹¬ï¼š",
                options: ["ç·Šæ€¥æƒ…æ³", "ç—…äººæ˜ç¤ºå…é™¤", "æ²»ç™‚ç‰¹æ¬Š", "å®¶å±¬åå°"],
                correct: 3,
                explanation: "å®¶å±¬åå°ä¸æ˜¯å…é™¤å‘ŠçŸ¥èªªæ˜ç¾©å‹™çš„åˆæ³•ç†ç”±ã€‚"
            },
            {
                question: "æ„æ€èƒ½åŠ›çš„å››å€‹è¦ç´ ä¸åŒ…æ‹¬ï¼š",
                options: ["è¡¨é”æ±ºå®š", "äº†è§£è³‡è¨Š", "è©•åƒ¹é‡è¦æ€§", "å®¶å±¬æ”¯æŒ"],
                correct: 3,
                explanation: "æ„æ€èƒ½åŠ›å››è¦ç´ ï¼šè¡¨é”æ±ºå®šã€äº†è§£è³‡è¨Šã€è©•åƒ¹è³‡è¨Šé‡è¦æ€§ã€é‚è¼¯åˆ†æèƒ½åŠ›ã€‚"
            },
            {
                question: "æ¬Šè¡¡åˆ©å®³åŸå‰‡å¼·èª¿ï¼š",
                options: ["çµ•å°ä¸å‚·å®³", "åˆ©ç›Šå¤§æ–¼å‚·å®³", "å®Œå…¨é¿å…é¢¨éšª", "å®¶å±¬æ»¿æ„"],
                correct: 1,
                explanation: "æ¬Šè¡¡åˆ©å®³åŸå‰‡è¦æ±‚å¥½è™•çš„æ•ˆç›Šå¿…é ˆå¤§æ–¼å‚·å®³ç¨‹åº¦ã€‚"
            }
        ];

        // æ¡ˆä¾‹åˆ†æé¡Œç›®
        const caseQuestions = [
            {
                title: "æå¤§æ˜çš„é€æé¸æ“‡",
                background: "82æ­²çš„æå¤§æ˜ç½¹æ‚£æœ«æœŸè…è¡°ç«­ï¼Œé†«å¸«è©³ç´°èªªæ˜è¡€æ¶²é€ææ²»ç™‚çš„é‡è¦æ€§åŠä¸åŒé€æé »ç‡çš„å·®ç•°ã€‚æå¤§æ˜åœ¨ç¨ç«‹åˆ¤æ–·å¾ŒåŒæ„æ¯é€±é€æä¸‰æ¬¡ã€‚",
                questions: [
                    {
                        question: "é€™å€‹æ¡ˆä¾‹ä¸»è¦é«”ç¾äº†å“ªå€‹å€«ç†åŸå‰‡ï¼Ÿ",
                        options: ["è‡ªä¸»åŸå‰‡", "å…¬å¹³åŸå‰‡", "è¡Œå–„åŸå‰‡", "ä¸å‚·å®³åŸå‰‡"],
                        correct: 0,
                        explanation: "é€™å€‹æ¡ˆä¾‹é«”ç¾äº†è‡ªä¸»åŸå‰‡ï¼Œç—…äººåœ¨å……åˆ†äº†è§£è³‡è¨Šå¾Œï¼Œä¾è‡ªå·±çš„æ„å¿—åšå‡ºé†«ç™‚æ±ºå®šã€‚"
                    },
                    {
                        question: "é†«å¸«çš„è¡Œç‚ºç¬¦åˆçŸ¥æƒ…åŒæ„çš„å“ªå€‹è¦ç´ ï¼Ÿ",
                        options: ["ç—…äººèƒ½åŠ›è©•ä¼°", "å……åˆ†èªªæ˜", "ç¢ºèªç†è§£", "ä»¥ä¸Šçš†æ˜¯"],
                        correct: 3,
                        explanation: "é†«å¸«è©³ç´°èªªæ˜æ²»ç™‚æ–¹æ¡ˆï¼Œç—…äººç¨ç«‹åˆ¤æ–·ä¸¦åšæ±ºå®šï¼Œé€™ç¬¦åˆçŸ¥æƒ…åŒæ„çš„æ‰€æœ‰è¦ç´ ã€‚"
                    }
                ]
            },
            {
                title: "COVID-19ç–«è‹—åˆ†é…",
                background: "åœ¨COVID-19ç–«æƒ…æœŸé–“ï¼Œå°ç£åˆ¶å®šå…¬è²»ç–«è‹—æ¥ç¨®é †åºï¼šç¬¬ä¸€é¡ç‚ºç¬¬ä¸€ç·šé†«è­·äººå“¡ï¼Œç¬¬äºŒé¡ç‚ºé«˜é¢¨éšªè€äººï¼Œç¬¬ä¸‰é¡ç‚ºç¶­æŒç¤¾æœƒé‹ä½œäººå“¡ã€‚",
                questions: [
                    {
                        question: "é€™ç¨®åˆ†é…æ–¹å¼ä¸»è¦é«”ç¾äº†å“ªç¨®å…¬å¹³åŸå‰‡ï¼Ÿ",
                        options: ["å½¢å¼å…¬å¹³", "ç¨‹åºå…¬å¹³", "åˆ†é…å…¬å¹³", "å ±æ‡‰å…¬å¹³"],
                        correct: 2,
                        explanation: "ç–«è‹—åˆ†é…é«”ç¾äº†åˆ†é…æ€§å…¬å¹³ï¼Œä¾æ“šé†«ç™‚éœ€æ±‚ã€é¢¨éšªç¨‹åº¦å’Œç¤¾æœƒåŠŸèƒ½é€²è¡Œåˆ†é…ã€‚"
                    },
                    {
                        question: "å„ªå…ˆçµ¦äºˆé†«è­·äººå“¡ç–«è‹—çš„ç†ç”±æ˜¯ï¼š",
                        options: ["å¹´é½¡è¼ƒè¼•", "ç¤¾æœƒåœ°ä½è¼ƒé«˜", "å·¥å…·åƒ¹å€¼è€ƒé‡", "å…ˆä¾†å…ˆæœå‹™"],
                        correct: 2,
                        explanation: "å„ªå…ˆçµ¦äºˆé†«è­·äººå“¡ç–«è‹—æ˜¯åŸºæ–¼å·¥å…·åƒ¹å€¼è€ƒé‡ï¼Œç¢ºä¿é†«ç™‚é«”ç³»æ­£å¸¸é‹ä½œã€‚"
                    }
                ]
            },
            {
                title: "å—å•¡æ­¢ç—›çš„å€«ç†è€ƒé‡",
                background: "50æ­²ç‹å…ˆç”Ÿé¼»å’½ç™Œéª¨è½‰ç§»ï¼Œç–¼ç—›é›£å¿ã€‚è­·ç†äººå“¡ä¾é†«å›‘çµ¦äºˆå¼·æ•ˆæ­¢ç—›åŠ‘å—å•¡ï¼Œé›–ç„¶å—å•¡å¯èƒ½æœ‰å‘¼å¸æŠ‘åˆ¶å‰¯ä½œç”¨ï¼Œä½†ç›®çš„æ˜¯ç‚ºäº†æ­¢ç—›ã€‚",
                questions: [
                    {
                        question: "é€™å€‹æ¡ˆä¾‹é«”ç¾äº†å“ªå€‹å€«ç†åŸå‰‡ï¼Ÿ",
                        options: ["è¤‡å¼å½±éŸ¿åŸå‰‡", "æ¬Šè¡¡åˆ©å®³åŸå‰‡", "ä»¥ä¸Šçš†æ˜¯", "ä»¥ä¸Šçš†é"],
                        correct: 2,
                        explanation: "é€™å€‹æ¡ˆä¾‹åŒæ™‚é«”ç¾äº†è¤‡å¼å½±éŸ¿åŸå‰‡ï¼ˆå‰¯ä½œç”¨éæ•…æ„ï¼‰å’Œæ¬Šè¡¡åˆ©å®³åŸå‰‡ï¼ˆæ­¢ç—›åˆ©ç›Šå¤§æ–¼å‰¯ä½œç”¨é¢¨éšªï¼‰ã€‚"
                    },
                    {
                        question: "ã€Œå…©å®³ç›¸æ¬Šå–å…¶è¼•ã€çš„åšæ³•ç¬¦åˆï¼š",
                        options: ["è‡ªä¸»åŸå‰‡", "å…¬å¹³åŸå‰‡", "è¡Œå–„åŸå‰‡", "ä¸å‚·å®³åŸå‰‡"],
                        correct: 3,
                        explanation: "åœ¨ç„¡æ³•å®Œå…¨é¿å…å‚·å®³æ™‚ï¼Œé¸æ“‡è¼ƒå°çš„å‚·å®³ä¾†é¿å…æ›´å¤§çš„å‚·å®³ï¼Œé€™ç¬¦åˆä¸å‚·å®³åŸå‰‡çš„æ¬Šè¡¡åˆ©å®³æ¦‚å¿µã€‚"
                    }
                ]
            }
        ];

        // åŸå‰‡è©³ç´°è³‡è¨Š
        const principleDetails = {
            autonomy: {
                title: "è‡ªä¸»åŸå‰‡ (Autonomy)",
                icon: "ğŸ™‹â€â™‚ï¸",
                color: "#ff6b6b",
                content: `
                    <h4>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
                    <p>è‡ªä¸»åŸå‰‡æºæ–¼å¸Œè‡˜æ–‡ã€Œè‡ªå·±ã€èˆ‡ã€Œè¦å‰‡ã€ï¼Œå¼·èª¿å€‹äººè‡ªæˆ‘æ±ºå®šçš„æ¬Šåˆ©ã€‚åŒ…å«è‡ªç”±æ„å¿—ï¼ˆä¸å—å¤–åŠ›å¹²æ“¾ï¼‰å’Œè¡Œå‹•èƒ½åŠ›ï¼ˆèƒ½å¯¦ç¾è‡ªå·±æ„é¡˜ï¼‰å…©å€‹æ ¸å¿ƒè¦ä»¶ã€‚</p>
                    
                    <h4>ğŸ¯ ä¸‰å€‹å±¤é¢</h4>
                    <ul>
                        <li><strong>æ€æƒ³è‡ªä¸»ï¼š</strong>æƒ…ç·’ç©©å®šï¼Œå…·å‚™ç†æ€§æ€è€ƒèƒ½åŠ›</li>
                        <li><strong>æ„é¡˜è‡ªä¸»ï¼š</strong>ä¾è‡ªå·±æ„é¡˜è¡Œäº‹ï¼Œä¸å—ä¸ç•¶å½±éŸ¿</li>
                        <li><strong>è¡Œå‹•è‡ªä¸»ï¼š</strong>ä¾è‡ªå·±åƒ¹å€¼è§€åšæ­£ç¢ºåˆ¤æ–·</li>
                    </ul>
                    
                    <h4>ğŸ“‹ çŸ¥æƒ…åŒæ„å››è¦ç´ </h4>
                    <ol>
                        <li><strong>ç—…äººèƒ½åŠ›ï¼š</strong>è©•ä¼°æ„è­˜ã€èªçŸ¥ã€è¡Œç‚ºèƒ½åŠ›</li>
                        <li><strong>ç—…æƒ…èªªæ˜ï¼š</strong>ç”¨ç—…äººèƒ½ç†è§£çš„èªè¨€å……åˆ†èªªæ˜</li>
                        <li><strong>ç—…äººç†è§£ï¼š</strong>ç¢ºèªç—…äººç†è§£ä¸¦å›ç­”ç–‘å•</li>
                        <li><strong>è‡ªé¡˜æ€§ï¼š</strong>ç„¡è„…è¿«æƒ…æ³ä¸‹è‡ªç”±æ±ºå®š</li>
                    </ol>
                    
                    <h4>âš ï¸ å‘ŠçŸ¥ç¾©å‹™å…é™¤æƒ…æ³</h4>
                    <ul>
                        <li>ç·Šæ€¥æƒ…æ³ï¼šç”Ÿå‘½å±æ€¥ä¸”ä¾†ä¸åŠå‘ŠçŸ¥</li>
                        <li>ç—…äººæ˜ç¤ºå…é™¤ï¼šä¸»å‹•æ”¾æ£„çŸ¥æƒ…æ¬Š</li>
                        <li>æ²»ç™‚ç‰¹æ¬Šï¼šå‘ŠçŸ¥å¯èƒ½é€ æˆé‡å¤§å‚·å®³</li>
                        <li>æ³•å¾‹ç‰¹åˆ¥è¦å®šï¼šå…¬å…±è¡›ç”Ÿè€ƒé‡</li>
                    </ul>
                `
            },
            justice: {
                title: "å…¬å¹³åŸå‰‡ (Justice)",
                icon: "âš–ï¸",
                color: "#4ecdc4",
                content: `
                    <h4>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
                    <p>ä¾†è‡ªäºé‡Œæ–¯å¤šå¾·çš„ã€Œå¹³è€…å¾…ä¹‹ä»¥å¹³ï¼Œä¸å¹³è€…å¾…ä¹‹ä»¥ä¸å¹³ã€ï¼Œå¼·èª¿å…¬é“ã€å…¬æ­£èˆ‡è³‡æºåˆ†é…çš„é©ç•¶æ€§ã€‚</p>
                    
                    <h4>ğŸ¯ ä¸‰å€‹å±¤é¢</h4>
                    <ul>
                        <li><strong>å¹³ç­‰ï¼š</strong>åŒæ¨£å€‹æ¡ˆä»¥åŒæ¨£æ–¹å¼æ²»ç™‚</li>
                        <li><strong>å…¬é“ï¼š</strong>è€ƒæ…®é“å¾·èªå¯å·®ç•°çš„å½ˆæ€§å¹³ç­‰</li>
                        <li><strong>ä¸å¹³ç­‰ï¼š</strong>é¿å…åŸºæ–¼ä¸ç•¶å› ç´ çš„æ­§è¦–</li>
                    </ul>
                    
                    <h4>ğŸ“Š ç¨€æœ‰è³‡æºåˆ†é…åŸå‰‡</h4>
                    <ol>
                        <li><strong>é†«ç™‚éœ€æ±‚ï¼š</strong>çµ¦æœ€éœ€è¦æ²»ç™‚çš„ç—…äºº</li>
                        <li><strong>é å¾Œè€ƒé‡ï¼š</strong>çµ¦æˆåŠŸç‡æœ€é«˜çš„ç—…äºº</li>
                        <li><strong>å¸‚å ´æ©Ÿåˆ¶ï¼š</strong>è‡ªè²»è³¼è²·é†«ç™‚æœå‹™</li>
                        <li><strong>å…ˆä¾†å¾Œåˆ°ï¼š</strong>æ™‚é–“é †åºåˆ†é…</li>
                        <li><strong>å·¥å…·åƒ¹å€¼ï¼š</strong>ç¶­æŒç¤¾æœƒåŠŸèƒ½è€…å„ªå…ˆ</li>
                        <li><strong>å¹³ç­‰åˆ†é…ï¼š</strong>ä¸åˆ†èƒŒæ™¯å¹³ç­‰äº«æœ‰</li>
                    </ol>
                    
                    <h4>ğŸ¥ è‡¨åºŠæ‡‰ç”¨</h4>
                    <ul>
                        <li><strong>å®è§€åˆ†é…ï¼š</strong>æ”¿åºœå±¤é¢çš„æ•´é«”è³‡æºè¦åŠƒ</li>
                        <li><strong>å¾®è§€åˆ†é…ï¼š</strong>é†«ç™‚æ©Ÿæ§‹çš„å…·é«”è³‡æºé…ç½®</li>
                    </ul>
                `
            },
            beneficence: {
                title: "è¡Œå–„åŸå‰‡ (Beneficence)",
                icon: "ğŸ’š",
                color: "#45b7d1",
                content: `
                    <h4>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
                    <p>å±¥è¡Œä»æ…ˆå–„è¡Œçš„è²¬ä»»ï¼Œé†«è­·äººå“¡æ‡‰ä»¥è‰¯å–„ç‚ºå‡ºç™¼é»ï¼Œç›¡åŠ›ç‚ºç—…äººè¬€æ±‚æœ€å¤§å¥åº·ç¦ç¥‰ï¼ŒåŒ…æ‹¬æ²»ç™‚ç–¾ç—…ã€æ¸›è¼•ç—›è‹¦ã€å»¶é•·ç”Ÿå‘½ã€‚</p>
                    
                    <h4>ğŸ¯ ä¸‰å€‹å¯¦è¸å±¤é¢</h4>
                    <ol>
                        <li><strong>é é˜²å‚·å®³ï¼š</strong>é æ¸¬å±éšªå› å­ï¼Œæ¡å–é é˜²æªæ–½</li>
                        <li><strong>å»é™¤å‚·å®³ï¼š</strong>ä¸é€ æˆå‚·å®³ï¼Œæ¸›è¼•æ—¢æœ‰æå‚·</li>
                        <li><strong>ç‚ºç—…äººä½œå–„äº‹ï¼š</strong>æä¾›æ­£é¢æ•ˆæœçš„è­·ç†æ´»å‹•</li>
                    </ol>
                    
                    <h4>âš–ï¸ æ¬Šè¡¡åˆ©å®³åŸå‰‡</h4>
                    <p>è¡Œå–„æ¦‚å¿µæ˜¯åšå¥½äº‹ä¸”ä¸è®“ç—…äººå—å‚·å®³ã€‚å› è¡Œå–„å°ç—…äººé€ æˆçš„å‚·å®³ä¸èƒ½é è¶…éå°ç—…äººçš„ç›Šè™•ã€‚</p>
                    
                    <h4>ğŸ’¡ è‡¨åºŠç¯„ä¾‹</h4>
                    <ul>
                        <li><strong>é é˜²è·Œå€’ï¼š</strong>è©•ä¼°é«˜å±éšªç¾¤ï¼ŒåŸ·è¡Œé˜²è·Œæªæ–½</li>
                        <li><strong>æˆªè‚¢æ‰‹è¡“ï¼š</strong>é›–æœ‰å‚·å®³ä½†é¿å…æ›´å¤§ç”Ÿå‘½å¨è„…</li>
                        <li><strong>æ²»ç™‚ç…§è­·ï¼š</strong>ç©æ¥µæä¾›æ²»ç™‚å’Œå¥åº·æ•™è‚²</li>
                        <li><strong>åŒ–ç™‚å‰¯ä½œç”¨ç®¡ç†ï¼š</strong>æ¬Šè¡¡æ²»ç™‚æ•ˆç›Šèˆ‡å‰¯ä½œç”¨</li>
                    </ul>
                `
            },
            "non-maleficence": {
                title: "ä¸å‚·å®³åŸå‰‡ (Non-maleficence)",
                icon: "ğŸ›¡ï¸",
                color: "#f9ca24",
                content: `
                    <h4>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
                    <p>æºæ–¼å¸Œæ³¢å…‹æ‹‰åº•èª“è¨€ã€Œnever do harm to anyoneã€åŠå—ä¸æ ¼çˆ¾èª“è©ï¼ŒæŒ‡ä¸è®“ç—…äººèº«å¿ƒéˆå—åˆ°å‚·å®³ï¼Œé€šå¸¸æ¯”è¡Œå–„åŸå‰‡æ›´å„ªå…ˆè€ƒé‡ã€‚</p>
                    
                    <h4>ğŸ¯ é‡è¦ç‰¹æ€§</h4>
                    <ul>
                        <li><strong>éçµ•å°åŸå‰‡ï¼š</strong>è‡¨åºŠè™•ç½®å¸¸æœ‰é¢¨éšªï¼Œæ‡‰å°‡å‚·å®³æ¸›è‡³æœ€ä½</li>
                        <li><strong>æ¬Šè¡¡åˆ©å®³ï¼š</strong>å¥½è™•æ•ˆç›Šå¿…é ˆå¤§æ–¼å‚·å®³ç¨‹åº¦</li>
                        <li><strong>é¢¨éšªè©•ä¼°ï¼š</strong>é¸æ“‡é¢¨éšªå°‘ã€å„ªé»æœ€å¤šçš„æ–¹æ¡ˆ</li>
                    </ul>
                    
                    <h4>ğŸ”„ è¤‡å¼å½±éŸ¿åŸå‰‡</h4>
                    <p>æ­£ç•¶è¡Œç‚ºç”¢ç”Ÿé–“æ¥ä¸”å¯é çŸ¥çš„æœ‰å®³å½±éŸ¿ï¼Œä½†æ­¤å½±éŸ¿éæ•…æ„é€ æˆï¼Œç‚ºå€«ç†å¯æ¥å—çš„è¡Œç‚ºã€‚</p>
                    
                    <h4>ğŸ’¡ è‡¨åºŠæ‡‰ç”¨</h4>
                    <ul>
                        <li><strong>æˆªè‚¢æ‰‹è¡“ï¼š</strong>é›–æœ‰å‚·å®³ä½†é é˜²æ›´å¤§å±éšª</li>
                        <li><strong>ä¹³æˆ¿åˆ‡é™¤ï¼š</strong>é›–é€ æˆèº«å¿ƒå½±éŸ¿ä½†æœ‰æ•ˆæ²»ç™’ç–¾ç—…</li>
                        <li><strong>å¼·æ•ˆæ­¢ç—›ï¼š</strong>ä¸»è¦ç›®çš„æ­¢ç—›ï¼Œå‰¯ä½œç”¨éæ•…æ„</li>
                        <li><strong>å…©å®³ç›¸æ¬Šï¼š</strong>é¸æ“‡è¼ƒå°å‚·å®³é¿å…æ›´å¤§å‚·å®³</li>
                    </ul>
                `
            }
        };

        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            loadGame(currentGame);
            updateProgress();
        }

        // åˆ‡æ›éŠæˆ²
        function switchGame(gameType) {
            // æ›´æ–°æ¨™ç±¤æ¨£å¼
            document.querySelectorAll('.game-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ›å…§å®¹
            document.querySelectorAll('.game-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${gameType}-game`).classList.add('active');

            currentGame = gameType;
            loadGame(gameType);
            updateProgress();
        }

        // è¼‰å…¥éŠæˆ²
        function loadGame(gameType) {
            const state = gameStates[gameType];
            state.current = 0;
            state.score = 0;
            state.answered = false;

            switch(gameType) {
                case 'scenario':
                    loadScenario();
                    break;
                case 'quiz':
                    loadQuiz();
                    break;
                case 'case':
                    loadCase();
                    break;
            }
            updateProgress();
        }

        // è¼‰å…¥æƒ…å¢ƒé¡Œ
        function loadScenario() {
            const state = gameStates.scenario;
            const question = scenarioQuestions[state.current];
            
            document.getElementById('scenario-current').textContent = state.current + 1;
            document.getElementById('scenario-total').textContent = scenarioQuestions.length;

            const questionHTML = `
                <div class="scenario-card">
                    <h3 class="scenario-title">${question.title}</h3>
                    <p class="scenario-text">${question.text}</p>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectScenarioOption(${index})">
                                ${option.text}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="scenario-feedback"></div>
                </div>
            `;
            
            document.getElementById('scenario-question').innerHTML = questionHTML;
            document.getElementById('scenario-next').classList.remove('show');
        }

        // é¸æ“‡æƒ…å¢ƒé¸é …
        function selectScenarioOption(optionIndex) {
            const state = gameStates.scenario;
            if (state.answered) return;

            const question = scenarioQuestions[state.current];
            const options = document.querySelectorAll('#scenario-game .option');
            const feedback = document.getElementById('scenario-feedback');

            state.answered = true;

            // æ¨™è¨˜æ‰€æœ‰é¸é …
            options.forEach((option, index) => {
                if (index === optionIndex) {
                    option.classList.add(question.options[index].correct ? 'correct' : 'incorrect');
                } else if (question.options[index].correct) {
                    option.classList.add('correct');
                }
            });

            // é¡¯ç¤ºå›é¥‹
            const isCorrect = question.options[optionIndex].correct;
            if (isCorrect) {
                state.score++;
                feedback.className = 'feedback show correct';
            } else {
                feedback.className = 'feedback show incorrect';
            }
            
            feedback.innerHTML = question.feedback;

            // é¡¯ç¤ºä¸‹ä¸€é¡ŒæŒ‰éˆ•
            document.getElementById('scenario-next').classList.add('show');
            updateProgress();

            // æ·»åŠ å‹•ç•«æ•ˆæœ
            if (isCorrect) {
                options[optionIndex].classList.add('bounce-animation');
            }
        }

        // ä¸‹ä¸€å€‹æƒ…å¢ƒé¡Œ
        function nextScenario() {
            const state = gameStates.scenario;
            state.current++;
            state.answered = false;

            if (state.current < scenarioQuestions.length) {
                loadScenario();
            } else {
                showGameComplete('scenario');
            }
        }

        // è¼‰å…¥å¿«å•å¿«ç­”
        function loadQuiz() {
            const state = gameStates.quiz;
            const question = quizQuestions[state.current];
            
            document.getElementById('quiz-current').textContent = state.current + 1;
            document.getElementById('quiz-total').textContent = quizQuestions.length;

            const questionHTML = `
                <div class="scenario-card">
                    <h3 class="scenario-title">å¿«å•å¿«ç­”</h3>
                    <p class="scenario-text">${question.question}</p>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectQuizOption(${index})">
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="quiz-feedback"></div>
                </div>
            `;
            
            document.getElementById('quiz-question').innerHTML = questionHTML;
            document.getElementById('quiz-next').classList.remove('show');
        }

        // é¸æ“‡å¿«å•å¿«ç­”é¸é …
        function selectQuizOption(optionIndex) {
            const state = gameStates.quiz;
            if (state.answered) return;

            const question = quizQuestions[state.current];
            const options = document.querySelectorAll('#quiz-game .option');
            const feedback = document.getElementById('quiz-feedback');

            state.answered = true;

            // æ¨™è¨˜é¸é …
            options.forEach((option, index) => {
                if (index === optionIndex) {
                    option.classList.add(index === question.correct ? 'correct' : 'incorrect');
                } else if (index === question.correct) {
                    option.classList.add('correct');
                }
            });

            // é¡¯ç¤ºå›é¥‹
            const isCorrect = optionIndex === question.correct;
            if (isCorrect) {
                state.score++;
                feedback.className = 'feedback show correct';
                feedback.innerHTML = `âœ… ç­”å°äº†ï¼${question.explanation}`;
            } else {
                feedback.className = 'feedback show incorrect';
                feedback.innerHTML = `âŒ ç­”éŒ¯äº†ï¼${question.explanation}`;
            }

            document.getElementById('quiz-next').classList.add('show');
            updateProgress();
        }

        // ä¸‹ä¸€å€‹å¿«å•å¿«ç­”
        function nextQuiz() {
            const state = gameStates.quiz;
            state.current++;
            state.answered = false;

            if (state.current < quizQuestions.length) {
                loadQuiz();
            } else {
                showGameComplete('quiz');
            }
        }

        // è¼‰å…¥æ¡ˆä¾‹åˆ†æ
        function loadCase() {
            const state = gameStates.case;
            const caseData = caseQuestions[state.current];
            
            document.getElementById('case-current').textContent = state.current + 1;
            document.getElementById('case-total').textContent = caseQuestions.length;

            let questionHTML = `
                <div class="scenario-card">
                    <h3 class="scenario-title">${caseData.title}</h3>
                    <p class="scenario-text"><strong>æ¡ˆä¾‹èƒŒæ™¯ï¼š</strong>${caseData.background}</p>
                </div>
            `;

            caseData.questions.forEach((question, qIndex) => {
                questionHTML += `
                    <div class="scenario-card">
                        <h4 class="scenario-title">å•é¡Œ ${qIndex + 1}</h4>
                        <p class="scenario-text">${question.question}</p>
                        <div class="options">
                            ${question.options.map((option, oIndex) => `
                                <div class="option" onclick="selectCaseOption(${qIndex}, ${oIndex})">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                        <div class="feedback" id="case-feedback-${qIndex}"></div>
                    </div>
                `;
            });
            
            document.getElementById('case-question').innerHTML = questionHTML;
            document.getElementById('case-next').classList.remove('show');
            
            // é‡ç½®æ¡ˆä¾‹ç‹€æ…‹
            if (!gameStates.case.caseAnswers) {
                gameStates.case.caseAnswers = [];
            }
            gameStates.case.caseAnswers[state.current] = new Array(caseData.questions.length).fill(false);
        }

        // é¸æ“‡æ¡ˆä¾‹é¸é …
        function selectCaseOption(questionIndex, optionIndex) {
            const state = gameStates.case;
            const caseData = caseQuestions[state.current];
            
            if (state.caseAnswers[state.current][questionIndex]) return;

            const question = caseData.questions[questionIndex];
            const options = document.querySelectorAll(`#case-game .scenario-card:nth-child(${questionIndex + 2}) .option`);
            const feedback = document.getElementById(`case-feedback-${questionIndex}`);

            state.caseAnswers[state.current][questionIndex] = true;

            // æ¨™è¨˜é¸é …
            options.forEach((option, index) => {
                if (index === optionIndex) {
                    option.classList.add(index === question.correct ? 'correct' : 'incorrect');
                } else if (index === question.correct) {
                    option.classList.add('correct');
                }
            });

            // é¡¯ç¤ºå›é¥‹
            const isCorrect = optionIndex === question.correct;
            if (isCorrect) {
                state.score++;
                feedback.className = 'feedback show correct';
                feedback.innerHTML = `âœ… æ­£ç¢ºï¼${question.explanation}`;
            } else {
                feedback.className = 'feedback show incorrect';
                feedback.innerHTML = `âŒ ä¸æ­£ç¢ºï¼${question.explanation}`;
            }

            // æª¢æŸ¥æ˜¯å¦æ‰€æœ‰å•é¡Œéƒ½å›ç­”äº†
            if (state.caseAnswers[state.current].every(answered => answered)) {
                document.getElementById('case-next').classList.add('show');
            }

            updateProgress();
        }

        // ä¸‹ä¸€å€‹æ¡ˆä¾‹
        function nextCase() {
            const state = gameStates.case;
            state.current++;

            if (state.current < caseQuestions.length) {
                loadCase();
            } else {
                showGameComplete('case');
            }
        }

        // é¡¯ç¤ºéŠæˆ²å®Œæˆ
        function showGameComplete(gameType) {
            const state = gameStates[gameType];
            let totalQuestions;
            
            switch(gameType) {
                case 'scenario':
                    totalQuestions = scenarioQuestions.length;
                    break;
                case 'quiz':
                    totalQuestions = quizQuestions.length;
                    break;
                case 'case':
                    totalQuestions = caseQuestions.reduce((sum, c) => sum + c.questions.length, 0);
                    break;
            }

            const percentage = Math.round((state.score / totalQuestions) * 100);
            let message = '';
            let emoji = '';

            if (percentage >= 90) {
                message = 'å¤ªæ£’äº†ï¼ä½ å°è­·ç†å€«ç†å››å¤§åŸå‰‡æŒæ¡å¾—éå¸¸å¥½ï¼';
                emoji = 'ğŸ†';
            } else if (percentage >= 70) {
                message = 'åšå¾—å¾ˆå¥½ï¼ä½ å°è­·ç†å€«ç†æœ‰ä¸éŒ¯çš„ç†è§£ï¼';
                emoji = 'ğŸ‘';
            } else if (percentage >= 50) {
                message = 'é‚„ä¸éŒ¯ï¼ç¹¼çºŒå­¸ç¿’æœƒæ›´é€²æ­¥ï¼';
                emoji = 'ğŸ’ª';
            } else {
                message = 'éœ€è¦å†åŠ å¼·å–”ï¼å»ºè­°è¤‡ç¿’ç›¸é—œæ¦‚å¿µï¼';
                emoji = 'ğŸ“š';
            }

            const gameNames = {
                scenario: 'æƒ…å¢ƒæŒ‘æˆ°',
                quiz: 'å¿«å•å¿«ç­”', 
                case: 'æ¡ˆä¾‹åˆ†æ'
            };

            const completionHTML = `
                <div class="scenario-card" style="text-align: center;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">${emoji}</div>
                    <h3 class="scenario-title">${gameNames[gameType]}å®Œæˆï¼</h3>
                    <div style="font-size: 2rem; margin: 1rem 0; color: #667eea;">
                        ${state.score} / ${totalQuestions} 
                    </div>
                    <div style="font-size: 1.5rem; margin: 1rem 0; color: #667eea;">
                        å¾—åˆ†ç‡ï¼š${percentage}%
                    </div>
                    <p class="scenario-text">${message}</p>
                    <button class="next-btn show" onclick="restartGame('${gameType}')" style="margin: 1rem;">
                        å†ç©ä¸€æ¬¡
                    </button>
                    <button class="next-btn show" onclick="switchToNextGame('${gameType}')" style="margin: 1rem;">
                        æŒ‘æˆ°å…¶ä»–éŠæˆ²
                    </button>
                </div>
            `;

            document.getElementById(`${gameType}-question`).innerHTML = completionHTML;
            document.getElementById(`${gameType}-next`).classList.remove('show');
        }

        // é‡æ–°é–‹å§‹éŠæˆ²
        function restartGame(gameType) {
            loadGame(gameType);
        }

        // åˆ‡æ›åˆ°ä¸‹ä¸€å€‹éŠæˆ²
        function switchToNextGame(gameType) {
            const games = ['scenario', 'quiz', 'case'];
            const currentIndex = games.indexOf(gameType);
            const nextGame = games[(currentIndex + 1) % games.length];
            
            // é»æ“Šå°æ‡‰çš„æ¨™ç±¤
            const tabs = document.querySelectorAll('.game-tab');
            tabs[games.indexOf(nextGame)].click();
        }

        // æ›´æ–°é€²åº¦
        function updateProgress() {
            const state = gameStates[currentGame];
            let current, total;

            switch(currentGame) {
                case 'scenario':
                    current = state.current;
                    total = scenarioQuestions.length;
                    break;
                case 'quiz':
                    current = state.current;
                    total = quizQuestions.length;
                    break;
                case 'case':
                    current = state.current;
                    total = caseQuestions.length;
                    break;
            }

            document.getElementById('score').textContent = state.score;
            
            // è¨ˆç®—ç¸½é¡Œæ•¸
            let totalQuestions = 0;
            switch(currentGame) {
                case 'scenario':
                    totalQuestions = scenarioQuestions.length;
                    break;
                case 'quiz':
                    totalQuestions = quizQuestions.length;
                    break;
                case 'case':
                    totalQuestions = caseQuestions.reduce((sum, c) => sum + c.questions.length, 0);
                    break;
            }
            
            document.getElementById('total').textContent = totalQuestions;
            
            const progress = current > 0 ? (current / total) * 100 : 0;
            document.getElementById('progress').style.width = progress + '%';
        }

        // é–‹å•ŸåŸå‰‡æ¨¡æ…‹æ¡†
        function openPrincipleModal(principle) {
            const modal = document.getElementById('principle-modal');
            const modalBody = document.getElementById('modal-body');
            const details = principleDetails[principle];
            
            modalBody.innerHTML = `
                <div class="modal-title" style="color: ${details.color};">
                    ${details.icon} ${details.title}
                </div>
                ${details.content}
            `;
            
            modal.classList.add('show');
        }

        // é—œé–‰åŸå‰‡æ¨¡æ…‹æ¡†
        function closePrincipleModal() {
            document.getElementById('principle-modal').classList.remove('show');
        }

        // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨é—œé–‰
        document.getElementById('principle-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePrincipleModal();
            }
        });

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initGame();
        });
    </script>
</body>
</html>